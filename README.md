<div dir="rtl">

# 🔤 Image to Hebrew Font Generator

**יוצר פונטים עברית מתמונות AI**

תוכנה שמזהה אוטומטית אותיות עבריות מתמונה (למשל תמונה שנוצרה ב-AI), מאפשרת לשייך כל צורה לאות, לכוונן גודל ומיקום, ולייצר קובץ TTF אמיתי שניתן להתקין ולהשתמש בו בכל תוכנה.

---

## ✨ תכונות

### זיהוי וסקירה
- **זיהוי אוטומטי של אותיות** — מעלים תמונה והמערכת מזהה את כל הצורות בנפרד
- **רמת הפרדה מתכוונת (0–5)** — בקרה על עוצמת ההפרדה בין אותיות צפופות (separation level)
- **סקירת זיהויים ויזואלית (שלב 2א)** — תצוגת Canvas עם מלבנים על התמונה המקורית; ניתן לגרור מלבן חדש להוספת זיהוי חסר, או ללחוץ על מלבן קיים למחיקתו
- **זיהוי מחדש מתוך הסקירה** — כפתור re-detect עם שליטה על רמת ההפרדה ישירות מהסקירה

### שיוך אותיות
- **שיוך במקלדת** — לחיצה על כרטיס + הקלדת אות = שיוך מיידי עם מעבר אוטומטי
- **מיזוג ופיצול** — מיזוג צורות שזוהו בנפרד (כמו נקודה + גוף של ! או ?) ופיצול צורות מורכבות

### תצוגה מקדימה וכוונון
- **תצוגה מקדימה חיה** — הקלדת טקסט ותצוגה מיידית של איך הפונט ייראה
- **כוונון לכל אות** — גודל (Scale), הזזה אנכית/אופקית, ריווח (Spacing)
- **כוונון גלובלי (החל על הכל)** — החלת הגדרות על כל האותיות בלחיצה אחת
- **גדלים פרופורציונליים** — אותיות קטנות (כמו ו) נשארות קטנות יחסית לאותיות גדולות (כמו ש), בדיוק כמו בפונט אמיתי
- **התאמה מדויקת לפונט** — מה שרואים בתצוגה מקדימה = מה שיוצא בפונט (כולל ירידת descenders)

### יצירת פונט
- **עקומות Bézier חלקות** — הפונט נוצר עם עקומות קוואדרטיות (לא קווים ישרים) לתוצאה מקצועית
- **תמיכה בחורים** — אותיות כמו ב, ד, ה, ם, ס שומרות על החללים הפנימיים
- **אותיות סופיות עם descenders** — ך, ן, ף, ץ, ק — ירידה אוטומטית מתחת לקו הבסיס
- **תווים נפוצים מ-Arial** — ספרות, סימני פיסוק, סוגריים ועוד (~46 תווים) מוזרקים אוטומטית מ-Arial לפונט
- **פונט TTF תקין** — עובר ולידציה ומתקין ב-Windows ללא בעיות

### מטא-דאטה אופציונלי
- **שם היוצר, תיאור, גרסה, רישיון, כתובת אתר** — שדות אופציונליים שנכתבים לטבלת name של הפונט

### שמירה וטעינת פרויקט
- **ייצוא פרויקט (.hfm)** — שמירת כל מצב העבודה (תמונה, זיהויים, שיוכים, כוונונים, מטא-דאטה) לקובץ יחיד
- **טעינת פרויקט** — חזרה לעבודה מאיפה שהפסקתם, כולל כל השינויים הידניים (הוספות, מחיקות, מיזוגים)
- **קובץ עצמאי לחלוטין** — הקובץ מכיל את התמונה המקורית, אין תלות בשרת או בתיקייה

---

## 📸 צילומי מסך

<div dir="ltr">

| העלאה וזיהוי | סקירת זיהויים | שיוך אותיות | תצוגה מקדימה | יצירת פונט |
|:---:|:---:|:---:|:---:|:---:|
| שלב 1 | שלב 2א | שלב 2ב | שלב 3 | שלב 4 |

</div>

---

## 🚀 התקנה

### דרישות מוקדמות
- Python 3.8 ומעלה
- Windows (נבדק על Windows 10/11)

### שלבים

```bash
# 1. שכפול הריפו
git clone https://github.com/UberStorm/Image-To-Hebrew-Font-Generator.git
cd Image-To-Hebrew-Font-Generator

# 2. התקנה (יוצר venv אוטומטית ומתקין חבילות)
install.bat

# 3. הפעלה (פותח דפדפן אוטומטית)
run.bat
```

לאחר ההפעלה, הדפדפן ייפתח אוטומטית בכתובת `http://127.0.0.1:5000`.

---

## 📖 שימוש

### שלב 1 — העלאת תמונה
העלו תמונה המכילה אותיות (למשל פלט של מודל AI שיצר פונט עברי).
המערכת תזהה אוטומטית את כל הצורות בתמונה.
ניתן לכוונן את **רמת ההפרדה** (0–5) לתמונות צפופות.
אם יש לכם קובץ פרויקט שמור (.hfm) — ניתן לטעון אותו כאן.

### שלב 2א — סקירת זיהויים
- מלבנים צבעוניים מסומנים על כל צורה שזוהתה
- **גררו מלבן חדש** להוספת זיהוי חסר
- **לחצו על מלבן** למחיקתו
- **זיהוי מחדש** עם רמת הפרדה שונה אם צריך
- לחצו "אישור והמשך" למעבר לשיוך

### שלב 2ב — שיוך אותיות
- לחצו על כרטיס של צורה שזוהתה
- הקלידו את האות המתאימה במקלדת
- המערכת עוברת אוטומטית לכרטיס הבא
- **Delete** = מחיקת שיוך | **Esc** = ביטול בחירה

#### מיזוג ופיצול
- **מיזוג:** כשנקודה (של ! או ?) זוהתה בנפרד — לחצו "מצב מיזוג/פיצול", בחרו 2+ כרטיסים ולחצו "מזג"
- **פיצול:** כששתי אותיות זוהו ביחד — בחרו כרטיס אחד ולחצו "פצל"

### שלב 3 — תצוגה מקדימה וכוונון
- הקלידו טקסט בשדה ותראו תצוגה מקדימה חיה
- לחצו על אות בתצוגה כדי לכוונן: גודל, הזזה אנכית/אופקית, ריווח
- **"החל על הכל"** — מחיל את אותן ההגדרות על כל האותיות
- הגדלים פרופורציונליים — אות קטנה נשארת קטנה יחסית לגדולה

### שלב 4 — יצירת פונט
- בחרו שם לפונט
- אופציונלי: הוסיפו שם יוצר, תיאור, גרסה, רישיון, אתר
- לחצו "צור פונט"
- הקובץ נשמר בתיקיית `fonts_output/`
- **ייצוא פרויקט** — שמרו את כל העבודה לקובץ .hfm כדי לחזור ולשפר מאוחר יותר

---

## 🏗️ מבנה הפרויקט

```
hebrew-font-maker/
├── backend/
│   ├── app.py              # שרת Flask + API endpoints (upload, detect, assign, generate, export/import)
│   ├── image_processor.py  # זיהוי אותיות, חילוץ קונטורים, מיזוג פרגמנטים, separation levels
│   ├── font_generator.py   # יצירת TTF עם עקומות Bézier, fallback glyphs, metadata
│   └── hebrew_support.py   # מילון אותיות, צורות סופיות, תמיכה RTL
├── frontend/
│   ├── index.html          # ממשק multi-step wizard (1 → 2א → 2ב → 3 → 4)
│   ├── script.js           # לוגיקת UI: שיוך, מיזוג, סקירת Canvas, תצוגה מקדימה, ייצוא/ייבוא
│   └── style.css           # עיצוב responsive עם תמיכה ב-RTL
├── config.py               # הגדרות (גודל פונט, סינון, נתיבים)
├── requirements.txt        # חבילות Python
├── install.bat             # סקריפט התקנה (venv + pip)
├── run.bat                 # סקריפט הפעלה
├── fonts_output/           # תיקיית פלט לפונטים שנוצרו
└── temp/                   # קבצים זמניים (uploads)
```

---

## 🔧 טכנולוגיות

| רכיב | טכנולוגיה |
|---|---|
| שרת | Flask 2.3 + Flask-CORS |
| עיבוד תמונה | OpenCV 4.8 (Otsu, RETR_CCOMP, morphological operations, separation levels) |
| יצירת פונטים | fontTools (FontBuilder, TTGlyphPen, quadratic B-splines, RecordingPen+TransformPen) |
| צד לקוח | Vanilla HTML/CSS/JS, Canvas API (ללא frameworks) |
| סביבה | Python venv, Windows batch scripts |

---

## 📝 הערות טכניות

- **אותיות סופיות:** `ף`, `ץ`, `ן`, `ך`, `ק` מקבלות הזזה אוטומטית של -200 יחידות מתחת לקו הבסיס (DESCENDER_SHIFT)
- **חורים באותיות:** המערכת משתמשת ב-`RETR_CCOMP` כדי לזהות קונטורים חיצוניים ופנימיים (חורים) בנפרד
- **עקומות חלקות:** פונט עם עקומות קוואדרטיות (`qCurveTo`) — B-spline שבו כל הנקודות הן נקודות בקרה, ונקודות האמצע ביניהן הן on-curve
- **חילוץ נאמן:** קונטורים מחולצים מהתמונה המקורית (לא מהמעובדת) כדי לשמור על צורת האותיות כפי שעוצבו
- **רמות הפרדה:** `preprocess_image` מפעילה morphological erosion/dilation עם kernel שגדל לפי רמת ההפרדה (0–5)
- **Fallback glyphs:** ~46 תווים נפוצים (ספרות, פיסוק, סוגריים, סמלים) מועתקים מ-Arial ומותאמים ל-unitsPerEm=1024
- **Uniform scaling:** כל האותיות מנורמלות יחסית לאות הגבוהה ביותר (reference_height), כך שפרופורציות טבעיות נשמרות
- **ייצוא פרויקט (v2):** קובץ .hfm מכיל תמונה מקורית + בינארית + קונטורים + שיוכים + כוונונים + מטא-דאטה — עצמאי לחלוטין

---

## 📄 רישיון

MIT License

</div>
